airports = {
	"CZS":  ['CZS', 'Aeroporto Internacional de Cruzeiro do Sul', 'Cruzeiro do Sul', -7.5992, -72.7678],
	"RBR":  ['RBR', 'Aeroporto Internacional de Rio Branco - Plácido de Castro', 'Rio Branco', -9.8696, -67.8945],
	"MCZ":  ['MCZ', 'Aeroporto Internacional Zumbi dos Palmares', 'Maceió', -9.51105, -35.79071],
	"MCP":  ['MCP', 'Aeroporto Internacional de Macapá', 'Macapá', 0.05051, -51.07100],
	"TFF":  ['TFF', 'Aeroporto de Tefé', 'Tefé', -3.3812, -64.7239],
	"TBT":  ['TBT', 'Aeroporto Internacional de Tabatinga', 'Tabatinga', -4.25072, -69.93878],
	"MAO":  ['MAO', 'Aeroporto Internacional Eduardo Gomes', 'Manaus', -3.03242, -60.04681],
	"LAZ":  ['LAZ', 'Aeroporto de Bom Jesusa da Lapa', 'Bom Jesus da Lapa', -13.26236, -43.40720],
	"IOS":  ['IOS', 'Aeroporto Jorge Amado', 'Ilhéus', -14.81577, -39.03166],
	"PAV":  ['PAV', 'Aeroporto de Paulo Afonso', 'Paulo Afonso',-9.39957, -38.24908],
	"SSA":  ['SSA', 'Aeroporto Internacional Dep. Luís Eduardo Magalhães', 'Salvador', -12.91401, -38.33480],
	"BPS":  ['BPS', 'Aeroporto de Porto Seguro', 'Porto Seguro', -16.43757, -39.07850],
	"FOR":  ['FOR', 'Aeroporto Internacional Pinto Martins', 'Fortaleza', -3.77795, -38.53957],
	"JDO":  ['JDO', 'Aeroporto Regional do Cariri', 'Juazeiro do Norte',-7.21988, -39.26958],
	"BSB":  ['BSB', 'Aeroporto Internacional Presidente Juscelino Kubitscheck', 'Brasília', -15.8770, -47.9236],
	"VIX":  ['VIX', 'Aeroporto Eurico de Aguiar Salles', 'Vitória', -20.25771, -40.28545],
	"GYN":  ['GYN', 'Aeroporto Santa Genoveva', 'Goiânia', -16.63453, -49.21543],
	"IMP":  ['IMP', 'Aeroporto de Imperatriz', 'Imperatriz', -5.53214, -47.45453],
	"SLZ":  ['SLZ', 'Aeroporto Internacional Marechal Cunha Machado', 'São Luís', -2.58758, -44.23534],
	"CGB":  ['CGB', 'Aeroporto Internacional Marechal Rondon', 'Várzea Grande',-15.65250, -56.11952],
	"CGB":  ['CGB', 'Aeroporto Internacional Marechal Rondon', 'Cuiabá',-15.65250, -56.11952],
	"CGR":  ['CGR', 'Aeroporto Internacional de Campo Grande', 'Campo Grande',-20.47046, -54.67336],
	"CMG":  ['CMG', 'Aeroporto Internacional de Corumbá', 'Corumbá',-19.01200, -57.66954],
	"PMG":  ['PMG', 'Aeroporto Internacional de Ponta Porã', 'Ponta Porã',-22.5528, -55.7033],
	"UDI":  ['UDI', 'Aeroporto Ten.-Cel. Av. César Bombonato', 'Uberlândia', -18.88824, -48.22625],
	"PLU":  ['PLU', 'Aeroporto da Pampulha - Carlos Drummond de Andrade', 'Belo Horizonte', -19.85202, -43.94890],
	"SBPR": ['SBPR', 'Aeroporto Carlos Prates', 'Belo Horizonte',-19.91039, -43.98995],
	"MOC":  ['MOC', 'Aeroporto de Monte Claros', 'Monte Claros', -16.7087, -43.8185],
	"POO":  ['POO', 'Embaixador Walther Moreira Salles', 'Poços de Caldas', -21.8428, -46.5639],
	"UBA":  ['UBA', 'Aeroporto Mário de Almeida Franco', 'Uberaba', -19.76521, -47.96408],
	"QAK":  ['QAK', 'Aeroporto de Barbacena', 'Barbacena', -21.26818, -43.76035],
	"ATM":  ['ATM', 'Aeroporto de Altamira', 'Altamira', -3.25201, -52.25130],
	"BEL":  ['BEL', 'Aeroporto Internacional de Belém/Val de Cans', 'Belém',-1.38056, -48.47490],
	"MAB":  ['MAB', 'Aeroporto de Marabá', 'Marabá', -5.36916, -49.13754],
	"CKS":  ['CKS', 'Aeroporto de Carajás', 'Paraiapebas', -6.11890, -49.99932],
	"STM":  ['STM', 'Aeroporto Internacional de Santarém', 'Santarém', -2.42254, -54.79000],
	"JPA":  ['JPA', 'Aeroporto Internacional Presidente Castro Pinto', 'Bayeux', -7.14895, -34.95032],
	"JPA":  ['JPA', 'Aeroporto Internacional Presidente Castro Pinto', 'João Pessoa', -7.14895, -34.95032],
	"CPV":  ['CPV', 'Aeroporto Presidente João Suassuna', 'Campina Grande', -7.27061, -35.89515],
	"LDB":  ['LDB', 'Aeroporto Governador José Richa', 'Londrina', -23.33443, -51.12769],
	"CWB":  ['CWB', 'Aeroporto Internacional Afonso Pena', 'São José dos Pinhais', -25.53601, -49.17198],
	"CWB":  ['CWB', 'Aeroporto Internacional Afonso Pena', 'Curitiba', -25.53601, -49.17198],
	"BFH":  ['BFH', 'Aeroporto do Bacacheri', 'Curitiba', -25.40021, -49.22901],
	"IGU":  ['IGU', 'Aeroporto Internacional Cataratas', 'Foz do Iguaçu', -25.6014, -54.484],
	"PNZ":  ['PNZ', 'Aeroporto de Petrolina', 'Petrolina', -9.36784, -40.59552],
	"REC":  ['REC', 'Aeroporto Internacional de Guarapes Gilberto Freyre', 'Recife', -8.13275, -34.91865],
	"FEN":  ['FEN', 'Aeroporto de Fernando de Noronha', 'Fernando de Noronha', -3.85554, -32.41982],
	"PHB":  ['PHB', 'Aeroporto Internacional Prefeiro Dr. João Silva Filho', 'Parnaíba', -2.89375, -41.73097],
	"THE":  ['THE', 'Aeroporto Senador Petrônio Portella', 'Teresina', -5.06066, -42.82194],
	"CAW":  ['CAW', 'Aeroporto de Campos dos Goytacazes', 'Campos dos Goytacazes', -21.68935, -41.31364],
	"MEA":  ['MEA', 'Aeroporto de Macaé', 'Macaé', -22.34273, -41.76515],
	"CFB":  ['CFB', 'Aeroporto de Cabo Frio', 'Cabo Frio', -22.929, -42.105],
	"GIG":  ['GIG', 'Aeroporto Internacional do Rio de Janeiro - Antônio Carlos Jobim', 'Rio de Janeiro', -22.81181, -43.25090],
	"SDU":  ['SDU', 'Aeroporto Santos Dumont', 'Rio de Janeiro', -22.91138, -43.16408],
	"ICAO": ['ICAO', 'Aeroporto de Jacarepaguá', 'Rio de Janeiro', -22.98781, -43.37036],
	"NAT":  ['NAT', 'Aeroporto Internacional Augusto Severo', 'Parnamirim', -5.90042, -35.24741],
	"NAT":  ['NAT', 'Aeroporto Internacional Augusto Severo', 'Natal', -5.90042, -35.24741],
	"BGX":  ['BGX', 'Aeroporto Internacional Comandante Gustavo Kraemer', 'Bagé', -31.39282, -54.11012],
	"PET":  ['PET', 'Aeroporto Internacional de Pelotas', 'Pelotas', -31.71629, -52.33005],
	"POA":  ['POA', 'Aeroporto Internacional Salgado Filho', 'Porto Alegre', -29.99384, -51.16900],
	"PVH":  ['PVH', 'Aeroporto Internacional Governador Jorge Teixeira', 'Porto Velho', -8.71702, -63.90031],
	"JPR":  ['JPR', 'Aeroporto José Coleto', 'Ji-Paraná', -10.87056, -61.84563],
	"BVB":  ['BVB', 'Aeroporto Internacional de Boa Vista', 'Boa Vista', 2.84639, -60.68758],
	"FLN":  ['FLN', 'Aeroporto Internacional Hercílio Luz', 'Florianópolis', -27.66521, -48.54243],
	"NVT":  ['NVT', 'Aeroporto Internacional Ministro Victor Konder', 'Navegantes', -26.88047, -48.64740],
	"JOI":  ['JOI', 'Aeroporto Lauro Carneiro de Loyola', 'Joinville', -26.22460, -48.79531],
	"CCM":  ['CCM', 'Aeroporto Diomicio Freitas', 'Forquilinha', -28.72582, -49.42129],
	"MAE":  ['MAE', 'Aeroporto Campo de Marte', 'São Paulo', -23.50900, -46.63461],
	"GRU":  ['GRU', 'Aeroporto Internacional de Guarulhos', 'São Paulo', -23.4599, -46.4879],
	"CGH":  ['CGH', 'Aeroporto de Congonhas/São Paulo', 'São Paulo', -23.62811, -46.65583],
	"SJK":  ['SJK', 'Aeroporto de São José dos Campos', 'São José dos Campos', -23.22758, -45.86159],
	"AJU":  ['AJU', 'Aeroporto Internacional de Aracaju', 'Aracaju', -10.98421, -37.06790],
	"PMW":  ['PMW', 'Aeroporto de Palmas', 'Palmas',-10.29037, -48.35581],
};

locations = {
	'Cruzeiro do Sul'      : ['Cruzeiro do Sul', -7.6296, -72.6751],
	'Rio Branco'           : ['Rio Branco', -9.973, -67.819],
	'Maceió'               : ['Maceió', -9.516, -35.693],
	'Macapá'               : ['Macapá', 0.39, -50.89],
	'Tefé'                 : ['Tefé', -3.3689, -64.7188],
	'Tabatinga'            : ['Tabatinga', -4.2422, -69.9383],
	'Manaus'               : ['Manaus', -3.07, -59.94],
	'Bom Jesus da Lapa'    : ['Bom Jesus da Lapa', -13.291, -43.23],
	'Ilhéus'               : ['Ilhéus', -14.7945, -39.0454],
	'Paulo Afonso'         : ['Paulo Afonso', -9.4088, -38.2364],
	'Salvador'             : ['Salvador', -12.924, -38.457],
	'Porto Seguro'         : ['Porto Seguro', -16.4444, -39.0642],
	'Fortaleza'            : ['Fortaleza', -3.800, -38.511],
	'Juazeiro do Norte'    : ['Juazeiro do Norte', -7.177, -39.280],
	'Brasília'             : ['Brasília', -15.796, -47.887],
	'Vitória'              : ['Vitória', -20.310, -40.311],
	'Goiânia'              : ['Goiânia', -16.690, -49.251],
	'Imperatriz'           : ['Imperatriz', -5.5207, -47.4785],
	'São Luís'             : ['São Luís', -2.539, -44.278],
	'Várzea Grande'        : ['Várzea Grande', -15.650, -56.131],
	'Cuiabá'               : ['Cuiabá',-15.602, -56.083],
	'Campo Grande'         : ['Campo Grande',-20.920, -54.32],
	'Corumbá'              : ['Corumbá', -19.0087, -57.6491],
	'Ponta Porã'           : ['Ponta Porã', -22.533, -55.720],
	'Uberlândia'           : ['Uberlândia', -18.915, -48.274],
	'Belo Horizonte'       : ['Belo Horizonte', -19.886, -43.953],
	'Monte Claros'         : ['Monte Claros', -16.7309, -43.8556],
	'Poços de Caldas'      : ['Poços de Caldas', -21.771, -46.545],
	'Uberaba'              : ['Uberaba', -19.750, -47.935],
	'Barbacena'            : ['Barbacena', -21.2231, -43.7689],
	'Altamira'             : ['Altamira',-19.558, -43.568],
	'Curitiba'             : ['Curitiba', -25.480, -49.294],
	'São José dos Pinhais' : ['São José dos Pinhais',-25.532, -49.194],
	'Foz do Iguaçu'        : ['Foz do Iguaçu', -25.474, -54.541],
	'Londrina'             : ['Londrina', -23.3079, -51.169],
	'João Pessoa'          : ['João Pessoa', -7.177, -34.879],
	'Belém'                : ['Belém', -1.390, -48.453],
	'Marabá'               : ['Marabá', -5.382, -49.135],
	'Paraiapebas'          : ['Paraiapebas',-6.0697, -49.9031],
	'Santarém'             : ['Santarém', -2.441, -54.702],
	'Bayeux'               : ['Bayeux',-7.1256, -34.9309],
	'João Pessoa'          : ['João Pessoa',-7.179, -34.884],
	'Campina Grande'       : ['Campina Grande',-7.225, -35.873],
	'Petrolina'            : ['Petrolina',-9.3910, -40.5023],
	'Recife'               : ['Recife', -8.053, -34.926],
	'Fernando de Noronha'  : ['Fernando de Noronha', -3.85554, -32.41982],
	'Parnaíba'             : ['Parnaíba', -2.908, -41.776],
	'Teresina'             : ['Teresina', -5.191, -42.734],
	'Campos dos Goytacazes': ['Campos dos Goytacazes',-21.766, -41.318],
	'Macaé'                : ['Macaé',-22.380, -41.782],
	'Cabo Frio'            : ['Cabo Frio',-22.691, -42.034],
	'Rio de Janeiro'       : ['Rio de Janeiro', -22.926, -43.23],
	'Natal'                : ['Natal', -5.794, -35.196],
	'Parnamirim'           : ['Parnamirim', -5.925, -35.268],
	'Porto Alegre'         : ['Porto Alegre', -30.026, -51.153],
	'Bagé'                 : ['Bagé',-31.3328, -54.097],
	'Pelotas'              : ['Pelotas',-31.771, -52.334],
	'Porto Velho'          : ['Porto Velho', -8.766, -63.896],
	'Ji-Paraná'            : ['Ji-Paraná', -10.8787, -61.9310],
	'Boa Vista'            : ['Boa Vista', 2.819, -60.673],
	'Florianópolis'        : ['Florianópolis', -27.615, -48.493],
	'Navegantes'           : ['Navegantes', -26.8964, -48.652],
	'Joinville'            : ['Joinville', -26.308, -48.841],
	'Forquilinha'          : ['Forquilinha', -28.7466, -49.4793],
	'Aracaju'              : ['Aracaju', -10.918, -37.067],
	'São Paulo'            : ['São Paulo', -23.553, -46.615],
	'São José dos Campos'  : ['São José dos Campos', -23.196, -45.886],
	'Palmas'               : ['Palmas', -10.212, -48.392],
	'Niterói'              : ['Niterói', -22.884, -43.097],
}

airlines = [
	['Air France', 'airline/AF.png'],
	['Gol', 'airline/gol.jpg'],
	['Azul', 'airline/azul.jpg'],
	['American Airlines', 'airline/aa.png'],
	['Delta Airlines', 'airline/delta.png'],
	['TAM', 'airline/tam.png'],
	['Avianca', 'airline/avianca.png'],
]


function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {
  var R = 6371; // Radius of the earth in km
  var dLat = deg2rad(lat2-lat1);  // deg2rad below
  var dLon = deg2rad(lon2-lon1); 
  var a = 
    Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
    Math.sin(dLon/2) * Math.sin(dLon/2)
    ; 
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
  var d = R * c; // Distance in km
  return d;
}

function deg2rad(deg) {
  return deg * (Math.PI/180)
}

function findNearAirports(max_distance, lat, lng){
	var near_airports = [];
	var codes = [];
	for (var code in airports) {
		var airport = airports[code];
		var distance = getDistanceFromLatLonInKm(lat, lng, airport[3], airport[4]);
		if (distance < max_distance) {
			near_airports.push(airport);
			codes.push(code);
		}
	}
	return [near_airports, codes];
}

function autoCompleteHTML(code, icon, name, city) {
	return '<div class="airport_item">' +
           	  '  <div class="airport">' +
              '    <div class="code">'+code+'</div>' +
              '    <span class="glyphicon glyphicon-'+icon+'"></span>' +
              '    <div class="name">'+name+'</div>' +
              '  </div>' +
              '  <div class="city">'+city+'</div>' +
              '  <div class="clear"></div>' +
              '</div>';
}

function autoCompleteList() {
	var source = [];
	var airport_cities = {}
	for (var code in airports) {
		var airport = airports[code];
		if (airport_cities[airport[2]] == undefined) {
			airport_cities[airport[2]] = [airport];
		} else {
			airport_cities[airport[2]].push(airport);
		}
		source.push({
			value: airport[2],
			city: airport[2],
			codes: [airport[0]],
			label_template: autoCompleteHTML('[0]', 'plane', '[1]', '[2]'),
            label_value: airport,
            search: airport[0] + ' ' + airport[1] + ' ' + airport[2]
		});
	}
	for (var city in airport_cities) {
		list = airport_cities[city];
		if (list.length > 1) {
			codes = [];
			for (var i = 0; i < list.length; i++) {
				codes.push(list[i][0]);
			}
			source.push({
    			value: city,
				city: city,
				codes: codes,
    			label_template: autoCompleteHTML('Todos', 'tower', '[0]', 'Todos Aeroportos ([1])'),
                label_value: [city, codes.join(', ')],
                search: city
    		});
		}
	  
	}
	var max_distance = 30;
	for (var city in locations) {
		var location = locations[city];
		
		var result = findNearAirports(max_distance, location[1], location[2]);
		var near_airports = result[0];
		var codes = result[1];

		source.push({
			value: location[0],
			city: location[0],
			codes: codes,
			label_template: autoCompleteHTML('', 'globe', '[0]', '[1]'),
            label_value: [location[0], (codes.length > 0) ? codes.join(', ') : ("Nenhum aeroporto encontrado em "+ max_distance + " km")],
            search: location[0]
		});
	}
	source.reverse();
	if (navigator.geolocation) {
	    navigator.geolocation.getCurrentPosition(function(position){
	    	var result = findNearAirports(max_distance, position.coords.latitude, position.coords.longitude);
    		var near_airports = result[0];
    		var codes = result[1];

		    source.unshift({
    			value: 'Posição atual',
				city: 'Posição atual',
				codes: codes,
    			label_template: autoCompleteHTML('', 'user', '[0]', '[1]'),
                label_value: ['Posição atual', (codes.length > 0) ? codes.join(', ') : ("Nenhum aeroporto encontrado em "+ max_distance + " km")],
                search: 'Posição atual'
    		});

	    });
	}
	return source;
}

function estimatePrice(airport1, airport2) {
	var distance = getDistanceFromLatLonInKm(airport1[3], airport1[4], airport2[3], airport2[4]);
	return 30.0 + distance * 0.15;
}

function estimateTime(airport1, airport2) {
	var distance = getDistanceFromLatLonInKm(airport1[3], airport1[4], airport2[3], airport2[4]);
	return (distance) / 13.3 + 40;
}

function priceByDate(date, price) {
	var weekday = {
		0: 1.3,
		1: 1.2,
		2: 1.1,
		3: 1.0,
		4: 1.2,
		5: 1.3,
		6: 1.0
	}

	var month = {
		0: 1.0,
		1: 1.1,
		2: 1.1,
		3: 1.0,
		4: 1.0,
		5: 1.0,
		6: 1.1,
		7: 1.1,
		8: 1.1,
		9: 1.0,
		10: 1.0,
		11: 1.1,
	}
	

	return price * weekday[date.getDay()] * month[date.getMonth()];

}

function dayFlights(date, airport1, airport2) {
	var distance = getDistanceFromLatLonInKm(airport1[3], airport1[4], airport2[3], airport2[4]);
	var price = priceByDate(date, estimatePrice(airport1, airport2));
	var nonStopTime = estimateTime(airport1, airport2);
	var oneStopTime = nonStopTime;
	var twoSStopTime = nonStopTime;
	var nonStopStops = [];
	var oneStopStops = [];
	var twoStopStops = [];
	
	var subname = airport1[1].replace('Aeroporto ', '').replace('Internacional ', '');
	stops = [];
	for (var i = 0; i < 40 && stops.length < 2; i++){
		for (var j = 0; j < 40 && stops.length < 2; j++){
			for (var k = 0; k < 40 && stops.length < 2; k++){
				var code = (subname[i % subname.length] + subname[j % subname.length] + subname[k % subname.length]).toUpperCase();
				if (code != airport2[0] && airports[code] != undefined && $.inArray(code, stops) == -1){
					stops.push(code);
				}
			}
		}	
	}
	if (stops.length > 0){
		oneStopTime = estimateTime(airport1, airports[stops[0]]) + estimateTime(airports[stops[0]], airport2) + 20;
		oneStopTime = (oneStopTime > 3 * nonStopTime) ? 3 * nonStopTime : oneStopTime;
		oneStopStops = [stops[0]];
	//	console.log(airport1[0], stops[0], airport2[0], oneStopTime);
	}
	if (stops.length > 1){
		twoStopTime = estimateTime(airport1, airports[stops[0]]) + estimateTime(airports[stops[0]], airports[stops[1]]) + estimateTime(airports[stops[1]], airport2) + 40;
		twoStopTime = (twoStopTime > 6 * nonStopTime) ? 6 * nonStopTime : twoStopTime;
		twoStopStops = stops;
	//	console.log(airport1[0], stops[0], stops[1], airport2[0], twoStopTime);
	}
	//console.log(distance, price, nonStopTime);
	var timePrice = {
		5 : 1.0,
		6 : 1.01,
		7 : 1.02,
		8 : 1.03,
		9 : 1.07,
		10 : 1.08,
		11 : 1.1,
		12 : 1.05,
		13 : 1.04,
		14 : 1.1,
		15 : 1.08,
		16 : 1.09,
		17 : 1.1,
		18 : 1.06,
		19 : 1.03,
		20 : 1.04,
		21 : 1.03,
		22 : 1.08,
		23 : 1.1
	};

	var result = [];

	for (var i = 6; i < 25; i++){
		for (var j = 0; j < 2; j++) {
			var delta = 0;
			var duration = 0;
			if (j + i % 4 == 0) {
				delta = airport1[3] + airport2[3];
				duration = airport1[4] + airport2[4];
			} else if (j + i % 4 == 1) {
				delta = airport1[3] + airport2[4];
				duration = airport1[3] + airport2[3];
			} else if (j + i % 4 == 2) {
				delta = airport1[4] + airport2[3];
				duration = airport1[3] + airport2[4];
			} else if (j + i % 4 == 3) {
				delta = airport1[4] + airport2[4];
				duration = airport1[4] + airport2[3];
			} 
			delta = (delta + date.getDay()) % 60;
			duration = -duration % 30;
			if (i == 24 && delta >= 0) {
				delta = -delta;
			}
			var stopCount = Math.round(Math.abs(delta  + i + 2 * j)*10) % 3;
			var airline = Math.round(Math.abs(delta  + i * 2  + j)*10) % airlines.length;
			var semidelta = Math.abs(delta) / 60.0;
			while (Math.floor(semidelta) < 1 && semidelta != 0) {
				semidelta *= 10;
			}

			var departure = new Date(date.getFullYear(), date.getMonth(), date.getDate(), i, Math.round(delta),0,0);
			var flightPrice = timePrice[i-1]*parseFloat("1.0"+Math.floor(semidelta)) * price;
			var flightDuration = [nonStopTime, oneStopTime, twoStopTime][stopCount] + duration;
			var arrival = new Date(departure);
			var stopList = [nonStopStops, oneStopStops, twoStopStops][stopCount];
			arrival.setMinutes(arrival.getMinutes() + flightDuration);
			result.push([departure, flightPrice, stopCount, stopList, flightDuration, airlines[airline], arrival]);
		}
		
	}	
	return result;
	
}

function days_between(date1, date2) {

    // The number of milliseconds in one day
    var ONE_DAY = 1000 * 60 * 60 * 24

    // Convert both dates to milliseconds
    var date1_ms = date1.getTime()
    var date2_ms = date2.getTime()

    // Calculate the difference in milliseconds
    var difference_ms = Math.abs(date1_ms - date2_ms)

    // Convert back to days and return
    return Math.round(difference_ms/ONE_DAY)

}

function to2char(num) {
	return (((num + "").length == 1)? "0" : "") + num;
}

function dateToStr(date) {
	return to2char(date.getDate()) + '/' 
		+ to2char(date.getMonth() + 1) + '/'
		+ (date.getYear() + 1900);
}

function strToDate(str) {
	return new Date(str.replace( /(\d{2})\/(\d{2})\/(\d{4})/, "$2/$1/$3"));
}

function weekday(date) {
	return {
		0: 'Domingo',
		1: 'Segunda',
		2: 'Terça',
		3: 'Quarta',
		4: 'Quinta',
		5: 'Sexta',
		6: 'Sábado'
	}[date.getDay()];
}

function priceToStr(price) {
	return price.toFixed(2);
}

function strToPrice(str) {
	return parseFloat(str);
}

function timeToStr(time) {
	return to2char(time.getHours())+':'+to2char(time.getMinutes());
}

function durationToStr(duration) {
	return to2char(Math.floor(duration / 60)) + ':' + to2char(Math.floor(duration % 60));
}


function jsonConcat(o1, o2) {
	for (var key in o2) {
		o1[key] = o2[key];
	}
	return o1;
}